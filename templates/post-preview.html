{% macro post_preview(post) %}
  <div class="post-preview">
    <h3 class="post-title"><a href="{{ post.permalink }}">{{ post.title }}</a></h3>
    <small>
      {{ post.date| date(format="%B %d, %Y") }}
    </small>
    -
    <small>
      {% for tag in post.taxonomies["tags"] %}
        <a href="{{ get_taxonomy_url(kind="tags", name=tag) }}">{{ tag }}</a>
      {% endfor %}
    </small>
    <div class="summary">
      {% if post.summary -%}
        {{ post.summary }}
      {% else %}
        {{ post.content | safe | striptags | truncate(length=300) }}
      {%- endif %}
      <a href="{{ post.permalink }}">read more</a>
    </div>
  </div>
{% endmacro input %}
